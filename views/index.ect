<html>
    <head>
        <meta charset="utf-8">

        <link rel="stylesheet" href="/style.css">

        <script src="/js/d3.js"></script>
        <script src="/js/moment.js"></script>

        <title>Coffee Shop</title>
    </head>
    <body>
        <h1>Coffee Shop at the Wide River</h1>

        <div class="week-header">
            <span><span class="week-header__live">&bull; </span>Live data</span>
            <span class="placeholder__week-number"></span>
            <span class="placeholder__week-days"></span>
            <span class="placeholder__week-days-count"></span>
            <span class="week-header__link"><a href="https://medium.com/@igorlukanin/coffee-shop-at-the-wide-river-1e2b7e001cb0" target="_blank">Read the story</a></span>
        </div>

        <div class="columns">
            <div class="columns__column">
                <div class="counters">
                    <div class="counters__counter">
                        Guests
                        <span class="counters__counter__value placeholder__week-guests">0</span>
                    </div>
                    <div class="counters__counter">
                        Sales
                        <span class="counters__counter__value placeholder__week-sales">0</span>
                        <span class="counters__counter__note">
                            including<br/>
                            <span class="placeholder__week-sales-anonymous">0</span> anonymous
                        </span>
                    </div>
                </div>
            </div>
            <div class="columns__column">
                <div class="counters">
                    <div class="counters__counter">
                        ARPS
                        <span class="counters__counter__value">
                            <span class="placeholder__week-arps">0</span><span class="sign">₽</span>
                        </span>
                    </div>
                    <div class="counters__counter">
                        ARPG
                        <span class="counters__counter__value">
                            <span class="placeholder__week-arpg">0</span><span class="sign">₽</span>
                        </span>
                        <span class="counters__counter__note">
                            <span class="placeholder__week-arpg-div-arps">0</span><span class="sign">%</span> ARPS
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="columns">
            <div class="columns__column">
                <div class="chart chart__users-and-sales"></div>
            </div>
            <div class="columns__column">
                <div class="chart chart__arpg-and-arps"></div>
            </div>
        </div>

        <div class="columns">
            <div class="columns__column">
                <div class="counters">
                    <div class="counters__counter">
                        Penetration
                        <span class="counters__counter__value">
                            <span class="placeholder__week-penetration">0</span><span class="sign">%</span>
                        </span>
                        <span class="counters__counter__note">
                            of <span class="placeholder__week-office-population">0</span> office workers
                        </span>
                    </div>
                    <div class="counters__counter">
                        Acquisition
                        <span class="counters__counter__value">
                            <span class="placeholder__week-acquisition">0</span><span class="sign">%</span>
                        </span>
                        <span class="counters__counter__note">
                            i.e. <span class="placeholder__week-new-guests">0</span> <a href="/guests.json" target="_blank">new guests</a>
                        </span>
                    </div>
                </div>
            </div>
            <div class="columns__column">
                <div class="counters">
                    <div class="counters__counter">
                        Retention
                        <span class="counters__counter__value">
                            <span class="placeholder__week-retention">0</span><span class="sign">%</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="columns">
            <div class="columns__column">
                <div class="chart chart__penetration-and-acquisition"></div>
            </div>
            <div class="columns__column">
                <div class="chart chart__retention"></div>
            </div>
        </div>

        <div class="columns">
            <div class="columns__column">
                <div class="counters">
                    <div class="counters__counter">
                        Rooms
                        <span class="counters__counter__value">
                            <span class="placeholder__week-rooms">0</span><span class="sign">%</span>
                        </span>
                        <span class="counters__counter__note">
                            of <span class="placeholder__office-rooms-count">0</span> office rooms
                        </span>
                    </div>
                    <div class="counters__counter">
                        Pollination
                        <span class="counters__counter__value">
                            <span class="placeholder__week-room-pollination">0</span><span class="sign">%</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <div class="columns">
            <div class="columns__column">
                <div class="chart chart__room-pollination"></div>
            </div>
        </div>

        <script src="/data.js"></script>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                updateData();

                setInterval(updateData, 15000);

                var liveIndicatorClasses = [
                    'week-header__live',
                    'week-header__live-hidden'
                ];

                var currentLiveIndicatorClass = 0;

                setInterval(function() {
                    var currentClass = liveIndicatorClasses[currentLiveIndicatorClass];

                    currentLiveIndicatorClass = (1 + currentLiveIndicatorClass) % 2;
                    var nextClass = liveIndicatorClasses[currentLiveIndicatorClass];

                    document.querySelector('.' + currentClass).className = nextClass;
                }, 1000);
            });
        </script>

        <!-- Yandex.Metrika counter --> <script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter41551394 = new Ya.Metrika({ id:41551394, clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div><img src="https://mc.yandex.ru/watch/41551394" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->
    </body>
</html>